// <auto-generated />
//
// expected import: {{ .ImportPath }}
package {{ .Name }}

{{ $pkg := . }}

import (
    {{  range $dep := .Dependencies -}}
    {{- if . -}}
    {{ .MangledName }} "{{ .ImportPath }}"
    {{  end -}}
    {{- end  }}
)

{{ range $name, $type := .Namespace.Types }}
type {{ $name }} struct {
    {{  range $name, $prop := .Properties -}}
    {{ pascal $name }} {{ asReference (resolve $pkg $prop.Type) }} `json:"{{$name}}" yaml:"{{$name}}" db:"{{ snake $name}}"`
    {{  end -}}
}
{{ end }}

type Interface interface {
    {{  range $name, $rpc := .Namespace.RPCs -}}
    {{ $name }}(
        {{- range $name, $arg := .InputTypes -}}
        {{ asReference (resolve $pkg $arg) }},
        {{- end -}}
    ) (
        {{- range $name, $arg := .OutputTypes -}}
        {{ asReference (resolve $pkg $arg) }},
        {{- end -}}
        error,
    )
    {{ end }}
}
